(self.webpackChunk_tool_pack_canvas_monorepo=self.webpackChunk_tool_pack_canvas_monorepo||[]).push([[134],{41007:function(i,d,s){"use strict";s.r(d),s.d(d,{default:function(){return X}});var p=s(25298),c=s.n(p),v=s(17069),l=s.n(v),x=s(82092),f=s.n(x),P=function(){function g(){var a=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};c()(this,g),f()(this,"listener",{}),f()(this,"renderer",null),f()(this,"parent",null),f()(this,"children",[]),f()(this,"computedStyle",void 0),this.style=e,this.style=new Proxy(e,{set:function(t,r,o){var u;return t[r]=o,a.handleStyle(),(u=a.renderer)===null||u===void 0||u.render(),!0},get:function(t,r){return t[r]}}),this.handleStyle()}return l()(g,[{key:"removeEventListener",value:function(e,n){var t,r=this.listener[e]||[],o=r.indexOf(n);r.splice(o,1),(t=this.renderer)===null||t===void 0||t.removeEventListener(e,this)}},{key:"handleStyle",value:function(){this.computedStyle=Object.assign({position:"static",borderRadius:0,zIndex:0,height:0,width:0},this.style),this.children.forEach(function(e){return e.handleStyle()})}},{key:"addEventListener",value:function(e,n){var t,r=this.listener[e]||[];r.push(n),this.listener[e]=r,(t=this.renderer)===null||t===void 0||t.addEventListener(e,this)}},{key:"appendChild",value:function(e){this.children.push(e),e.renderer=this.renderer,e.parent=this,this.handleStyle(),this.children.sort(function(n,t){return n.computedStyle.zIndex-t.computedStyle.zIndex})}},{key:"removeChild",value:function(e){var n=this.children,t=n.findIndex(function(r){return r===e});t!==-1&&(this.children.splice(t,1),e.renderer=null,e.parent=null)}},{key:"isHit",value:function(e,n){var t=n.offsetX||0,r=n.offsetY||0;return this.drawPath(e,this.computedStyle),e.isPointInPath(t,r)}},{key:"renderAll",value:function(e){e.save(),this.render(e),e.restore(),this.children.forEach(function(n){e.save(),n.render(e),e.restore()})}},{key:"append",value:function(e){e.appendChild(this)}},{key:"remove",value:function(){var e;(e=this.parent)===null||e===void 0||e.removeChild(this)}}]),g}(),m=function(){function g(a){c()(this,g),f()(this,"listeningMap",{}),f()(this,"listeningShapeMap",{}),f()(this,"offScreenCTX",void 0),f()(this,"offScreenCanvas",void 0),f()(this,"ctx",void 0),f()(this,"canvas",void 0),f()(this,"shapes",[]),f()(this,"height",void 0),f()(this,"width",void 0);var e=typeof a=="string"?document.querySelector(a):a;if(!e)throw new Error("canvas can not be empty!");var n=document.createElement("canvas");this.width=n.width=e.width,this.height=n.height=e.height,this.offScreenCTX=n.getContext("2d"),this.ctx=e.getContext("2d"),this.offScreenCanvas=n,this.canvas=e,this.simulateMouseEvents()}return l()(g,[{key:"simulateMouseEvents",value:function(){var e=this,n=new Set,t=this.listeningShapeMap,r=this.offScreenCTX,o=function(h){(t.mouseleave||[]).forEach(function(y){n.has(y)&&!y.isHit(r,h)&&(e.callListenerCallback("mouseleave",y),n.delete(y))})};this.listeningMap.mousemove=function(u){(t.mouseenter||[]).forEach(function(h){!n.has(h)&&h.isHit(r,u)&&(e.callListenerCallback("mouseenter",h),n.add(h))}),(t.mousemove||[]).forEach(function(h){n.has(h)&&h.isHit(r,u)&&e.callListenerCallback("mousemove",h)}),o(u)},this.canvas.addEventListener("mousemove",this.listeningMap.mousemove),this.listeningMap.mouseleave=o,this.canvas.addEventListener("mouseleave",this.listeningMap.mouseleave)}},{key:"addEventListener",value:function(e,n){var t=this,r=this.listeningShapeMap,o=this.offScreenCTX,u=this.listeningMap,h=r[e]||[];if(!h.includes(n)&&(h.push(n),r[e]=h,!(u[e]||["mouseenter","mousemove","mouseleave"].includes(e)))){var y=function(L){h.forEach(function(S){S.isHit(o,L)&&t.callListenerCallback(e,S)})};u[e]=y,this.canvas.addEventListener(e,y)}}},{key:"remove",value:function(e){var n=this,t=this.shapes,r=t.findIndex(function(u){return u===e});if(r!==-1){this.shapes.splice(r,1),e.renderer=null;var o=function u(h){for(var y in h.listener)n.removeEventListener(y,h);h.children.forEach(function(E){u(E)})};o(e)}}},{key:"removeEventListener",value:function(e,n){var t=this.listeningShapeMap,r=this.listeningMap,o=r[e];if(o){var u=t[e]||[],h=u.indexOf(n);h!==-1&&(u.splice(h,1),u.length===0&&(this.canvas.removeEventListener(e,r[e]),delete r[e]))}}},{key:"add",value:function(e){var n=this;e.renderer=this,this.shapes.push(e),this.shapes.sort(function(r,o){return r.computedStyle.zIndex-o.computedStyle.zIndex});var t=function r(o){for(var u in o.listener)n.addEventListener(u,o);o.children.forEach(r)};t(e)}},{key:"render",value:function(){var e=this.offScreenCTX,n=this.ctx;n.clearRect(0,0,this.width,this.height),e.clearRect(0,0,this.width,this.height),this.shapes.forEach(function(t){t.renderAll(e)}),n.drawImage(this.offScreenCanvas,0,0)}},{key:"callListenerCallback",value:function(e,n){var t;(t=n.listener[e])===null||t===void 0||t.forEach(function(r){r.call(n)})}}]),g}(),C=s(77171),k=s(26068),w=s.n(k),j=s(21742),B=s.n(j),I=s(83136),T=s.n(I),R=function(g){B()(e,g);var a=T()(e);function e(){return c()(this,e),a.apply(this,arguments)}return l()(e,[{key:"drawPathWithoutBorder",value:function(t){var r=this.computedStyle,o=r.borderWidth||0;this.drawPath(t,w()(w()({},r),{},{left:(r.left||0)+o/2,top:(r.top||0)+o/2,height:r.height-o,width:r.width-o}))}},{key:"renderBorder",value:function(t){var r=this.computedStyle;r.borderWidth&&(this.drawPathWithoutBorder(t),t.lineWidth=r.borderWidth||0,t.strokeStyle=r.borderColor||"black",t.stroke())}},{key:"renderBackground",value:function(t){var r=this.computedStyle;r.backgroundColor&&(t.fillStyle=r.backgroundColor),this.drawPathWithoutBorder(t),t.fill()}},{key:"drawPath",value:function(t,r){var o=r.borderRadius,u=o===void 0?0:o,h=r.left,y=h===void 0?0:h,E=r.top,L=E===void 0?0:E,S=r.height,M=r.width;t.beginPath(),M<2*u&&(u=M/2),S<2*u&&(u=S/2),t.beginPath(),t.roundRect(y,L,M,S,u),t.closePath()}},{key:"render",value:function(t){this.renderBackground(t),this.renderBorder(t)}}]),e}(P),O=s(50959),b=s(11527),W=function(){var a=(0,O.useRef)(null);return(0,O.useEffect)(function(){var e=a.current;if(e){var n=["#00e09e","#fff143"],t=new m(e),r=new R({backgroundColor:n[0],height:80,width:80}),o=new R({borderColor:"rgb(80, 97, 109)",backgroundColor:n[1],position:"absolute",borderRadius:10,borderWidth:5,height:80,left:100,width:80});r.addEventListener("mouseenter",function(){this.style.backgroundColor=n[1]}),r.addEventListener("mouseleave",function(){this.style.backgroundColor=n[0]}),o.addEventListener("mouseenter",function(){this.style.borderWidth=0,this.style.backgroundColor=n[0]}),o.addEventListener("mouseleave",function(){this.style.borderWidth=5,this.style.backgroundColor=n[1]}),t.add(r),t.add(o),t.render()}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{children:"Hover"}),(0,b.jsx)("canvas",{height:200,width:200,ref:a})]})},X=W},77171:function(){},62657:function(i){function d(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}i.exports=d,i.exports.__esModule=!0,i.exports.default=i.exports},83136:function(i,d,s){var p=s(38836),c=s(68919),v=s(75254);function l(x){var f=c();return function(){var m=p(x),C;if(f){var k=p(this).constructor;C=Reflect.construct(m,arguments,k)}else C=m.apply(this,arguments);return v(this,C)}}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},38836:function(i){function d(s){return i.exports=d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},i.exports.__esModule=!0,i.exports.default=i.exports,d(s)}i.exports=d,i.exports.__esModule=!0,i.exports.default=i.exports},21742:function(i,d,s){var p=s(80038);function c(v,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(l&&l.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),l&&p(v,l)}i.exports=c,i.exports.__esModule=!0,i.exports.default=i.exports},68919:function(i){function d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}i.exports=d,i.exports.__esModule=!0,i.exports.default=i.exports},75254:function(i,d,s){var p=s(31759).default,c=s(62657);function v(l,x){if(x&&(p(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(l)}i.exports=v,i.exports.__esModule=!0,i.exports.default=i.exports},80038:function(i){function d(s,p){return i.exports=d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,l){return v.__proto__=l,v},i.exports.__esModule=!0,i.exports.default=i.exports,d(s,p)}i.exports=d,i.exports.__esModule=!0,i.exports.default=i.exports}}]);
